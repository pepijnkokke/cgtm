BEFORE-SECTIONS
ADDCOHORT ("<State>" "State0") BEFORE ("<Cell>") IF (-1 (>>>));

SECTION
ADD ("<State>" "OLD") ("<State>");
ADD ("<Cell>" "OLD") ("<Cell>") IF (-1 ("<State>" "OLD"));

### ("State0", "_") -> ("State1", "_", R) ###
ADDCOHORT ("<Cell>" "_") AFTER ("<State>" "State0" "OLD") IF (0 (<<<));
ADDCOHORT ("<State>" "State1") BEFORE ("<Cell>") IF (-2 ("<State>" "State0" "OLD") LINK 1 ("<Cell>" "_" "OLD"));
ADDCOHORT ("<Cell>" "_") AFTER ("<Cell>" "_" "OLD") IF (-1 ("<State>" "State0" "OLD"));

### ("State0", "0") -> ("State0", "0", L) ###
ADDCOHORT ("<Cell>" "_") BEFORE ("<State>" "State0" "OLD") IF (1 ("<Cell>" "0" "OLD") LINK -2 (>>>));
ADDCOHORT ("<State>" "State0") BEFORE ("<Cell>") IF (1 ("<State>" "State0" "OLD") LINK 1 ("<Cell>" "0" "OLD"));
ADDCOHORT ("<Cell>" "0") AFTER ("<Cell>" "0" "OLD") IF (-1 ("<State>" "State0" "OLD"));

### ("State0", "1") -> ("State0", "1", L) ###
ADDCOHORT ("<Cell>" "_") BEFORE ("<State>" "State0" "OLD") IF (1 ("<Cell>" "1" "OLD") LINK -2 (>>>));
ADDCOHORT ("<State>" "State0") BEFORE ("<Cell>") IF (1 ("<State>" "State0" "OLD") LINK 1 ("<Cell>" "1" "OLD"));
ADDCOHORT ("<Cell>" "1") AFTER ("<Cell>" "1" "OLD") IF (-1 ("<State>" "State0" "OLD"));

### ("State1", "_") -> ("State2", "1", L) ###
ADDCOHORT ("<Cell>" "_") BEFORE ("<State>" "State1" "OLD") IF (1 ("<Cell>" "_" "OLD") LINK -2 (>>>));
ADDCOHORT ("<State>" "State2") BEFORE ("<Cell>") IF (1 ("<State>" "State1" "OLD") LINK 1 ("<Cell>" "_" "OLD"));
ADDCOHORT ("<Cell>" "1") AFTER ("<Cell>" "_" "OLD") IF (-1 ("<State>" "State1" "OLD"));

### ("State1", "0") -> ("State2", "1", R) ###
ADDCOHORT ("<Cell>" "_") AFTER ("<State>" "State1" "OLD") IF (0 (<<<));
ADDCOHORT ("<State>" "State2") BEFORE ("<Cell>") IF (-2 ("<State>" "State1" "OLD") LINK 1 ("<Cell>" "0" "OLD"));
ADDCOHORT ("<Cell>" "1") AFTER ("<Cell>" "0" "OLD") IF (-1 ("<State>" "State1" "OLD"));

### ("State1", "1") -> ("State1", "0", R) ###
ADDCOHORT ("<Cell>" "_") AFTER ("<State>" "State1" "OLD") IF (0 (<<<));
ADDCOHORT ("<State>" "State1") BEFORE ("<Cell>") IF (-2 ("<State>" "State1" "OLD") LINK 1 ("<Cell>" "1" "OLD"));
ADDCOHORT ("<Cell>" "0") AFTER ("<Cell>" "1" "OLD") IF (-1 ("<State>" "State1" "OLD"));

### ("State2", "_") -> ("Halt", "_", R) ###
ADDCOHORT ("<Cell>" "_") AFTER ("<State>" "State2" "OLD") IF (0 (<<<));
# ACCEPT
ADDCOHORT ("<Cell>" "_") AFTER ("<Cell>" "_" "OLD") IF (-1 ("<State>" "State2" "OLD"));

### ("State2", "0") -> ("State2", "0", L) ###
ADDCOHORT ("<Cell>" "_") BEFORE ("<State>" "State2" "OLD") IF (1 ("<Cell>" "0" "OLD") LINK -2 (>>>));
ADDCOHORT ("<State>" "State2") BEFORE ("<Cell>") IF (1 ("<State>" "State2" "OLD") LINK 1 ("<Cell>" "0" "OLD"));
ADDCOHORT ("<Cell>" "0") AFTER ("<Cell>" "0" "OLD") IF (-1 ("<State>" "State2" "OLD"));

### ("State2", "1") -> ("State2", "1", L) ###
ADDCOHORT ("<Cell>" "_") BEFORE ("<State>" "State2" "OLD") IF (1 ("<Cell>" "1" "OLD") LINK -2 (>>>));
ADDCOHORT ("<State>" "State2") BEFORE ("<Cell>") IF (1 ("<State>" "State2" "OLD") LINK 1 ("<Cell>" "1" "OLD"));
ADDCOHORT ("<Cell>" "1") AFTER ("<Cell>" "1" "OLD") IF (-1 ("<State>" "State2" "OLD"));

REMCOHORT ("<State>" "OLD");
REMCOHORT ("<Cell>" "OLD");

AFTER-SECTIONS
REMCOHORT ("<Cell>" "_") IF (NOT -1* ("<Cell>" "0") OR ("<Cell>" "1"));